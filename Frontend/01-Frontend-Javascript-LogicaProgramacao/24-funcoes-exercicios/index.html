<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <h1>Lógica de programação com javascript - Cadastro de clientes</h1>
        <p>
            Escreva um programa em javascript que solicita o nome do cliente,
            email e
            telefone e acrescente (push) ele numa lista lista de objetos
            cliente. Após
            acrescentar, exibir essa lista na tela com os clientes e seus dados
            e sua
            respectiva posição no array. Dê a opção para o usuário remover o
            cliente se
            ele quiser pedindo o índice e removendo do array. Peça a opção via
            prompt().
        </p>
        <script type="text/javascript">

            let clientes = [];

            function validarCliente(cliente)
            {
                if(cliente.sexo == "M")
                    return cliente.idade >= 18;
                return true;
            }

            while(true)
            {
                if(clientes.length > 0)
                {
                    var listaClientes = "";
                    for (let i = 0; i < clientes.length; i++) {
                        listaClientes +=  i + " - " + clientes[i].nome + "\n";
                    }
                    alert(
                        "CLIENTES CADASTRADOS\n" + 
                        listaClientes
                    );
                }                

                var opcaoMenu = prompt("Digite NOVO, REMOVER ou SAIR para finalizar:");
                if(opcaoMenu == "SAIR")
                    break;

                switch(opcaoMenu)
                {
                    case "NOVO":
                        let novoCliente = {};

                        novoCliente.nome = prompt("Digite o nome do cliente:");
                        novoCliente.sexo = prompt("qual seu sexo (M)Masculino/(F)Feminino:");
                        novoCliente.idade = parseInt(prompt("Digite sua idade:"));

                        var validacaoResultado = validarCliente(novoCliente);
                        if(validacaoResultado == true)
                        {
                            clientes.push(novoCliente);
                        }
                        else{
                            alert("Cliente não pode ser cadastrado. Homens precisam ser maiores que idade.");
                        }
                        break;

                    case "REMOVER":
                        var indiceCliente = prompt("Digite o índice do cliente:");
                        clientes.splice(indiceCliente, 1);
                        break;
                }
            }

        </script>
    </body>
</html>